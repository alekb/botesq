# BotEsq Environment Variables
# Copy this file to .env.local and fill in the values
# NEVER commit .env.local to version control

# ==================================================
# DATABASE
# ==================================================

# PostgreSQL connection string
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/botesq_dev?schema=public"

# ==================================================
# AUTHENTICATION & SECURITY
# ==================================================

# Session encryption key - MUST be 32+ random bytes
# Generate with: openssl rand -base64 32
SESSION_SECRET="CHANGE_ME_generate_with_openssl_rand_base64_32"

# Salt for hashing API keys - MUST be 32+ random bytes
# Generate with: openssl rand -base64 32
API_KEY_SALT="CHANGE_ME_generate_with_openssl_rand_base64_32"

# TOTP encryption key for 2FA secrets - MUST be 32 bytes
# Generate with: openssl rand -base64 32
TOTP_ENCRYPTION_KEY="CHANGE_ME_generate_with_openssl_rand_base64_32"

# ==================================================
# AI SERVICES
# ==================================================

# OpenAI API key for legal AI
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=""

# ==================================================
# STRIPE PAYMENTS
# ==================================================

# Stripe secret key (starts with sk_test_ or sk_live_)
STRIPE_SECRET_KEY=""

# Stripe webhook signing secret (starts with whsec_)
STRIPE_WEBHOOK_SECRET=""

# Stripe redirect URLs
STRIPE_SUCCESS_URL="https://botesq.io/portal/billing?success=true"
STRIPE_CANCEL_URL="https://botesq.io/portal/billing?canceled=true"

# ==================================================
# AWS S3 (Document Storage)
# ==================================================

AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
AWS_REGION="us-east-1"
S3_BUCKET=""

# Pre-signed URL expiry in seconds (default: 15 minutes)
S3_PRESIGNED_URL_EXPIRY="900"

# ==================================================
# APPLICATION
# ==================================================

NODE_ENV="development"
PORT="3000"
MCP_PORT="3001"

# Public-facing application URL (no trailing slash)
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ==================================================
# RATE LIMITING
# ==================================================

# Redis URL for distributed rate limiting (optional)
# REDIS_URL="redis://localhost:6379"

# ==================================================
# LOGGING
# ==================================================

# Log level: fatal, error, warn, info, debug, trace
LOG_LEVEL="info"

# ==================================================
# CLAMAV VIRUS SCANNING
# ==================================================

# Enable virus scanning (requires ClamAV daemon)
# Run: docker compose up -d clamav
CLAMAV_ENABLED="false"

# Mode: 'daemon' (connect to clamd) or 'local' (run clamscan binary)
CLAMAV_MODE="daemon"

# ClamAV daemon connection settings
CLAMAV_HOST="127.0.0.1"
CLAMAV_PORT="3310"

# Optional: Unix socket path (overrides host/port if set)
# CLAMAV_SOCKET="/var/run/clamav/clamd.sock"

# Scan timeout in milliseconds
CLAMAV_TIMEOUT="60000"

# Binary paths (only needed for 'local' mode)
CLAMAV_CLAMSCAN_PATH="/usr/bin/clamscan"
CLAMAV_CLAMDSCAN_PATH="/usr/bin/clamdscan"

# ==================================================
# FEATURE FLAGS
# ==================================================

# Enable provider marketplace (Phase 16+)
FEATURE_PROVIDER_MARKETPLACE="false"

# Enable 2FA requirement for attorneys
FEATURE_ATTORNEY_2FA_REQUIRED="true"
